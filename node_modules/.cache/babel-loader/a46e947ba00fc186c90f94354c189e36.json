{"remainingRequest":"/Users/davis/Documents/0A开课吧学习/vue/vue-cli4/node_modules/babel-loader/lib/index.js!/Users/davis/Documents/0A开课吧学习/vue/vue-cli4/node_modules/eslint-loader/index.js??ref--13-0!/Users/davis/Documents/0A开课吧学习/vue/vue-cli4/src/kstore/kvuex.js","dependencies":[{"path":"/Users/davis/Documents/0A开课吧学习/vue/vue-cli4/src/kstore/kvuex.js","mtime":1591187206668},{"path":"/Users/davis/Documents/0A开课吧学习/vue/vue-cli4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/davis/Documents/0A开课吧学习/vue/vue-cli4/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/davis/Documents/0A开课吧学习/vue/vue-cli4/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9Vc2Vycy9kYXZpcy9Eb2N1bWVudHMvMEFcdTVGMDBcdThCRkVcdTU0MjdcdTVCNjZcdTRFNjAvdnVlL3Z1ZS1jbGk0L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL1VzZXJzL2RhdmlzL0RvY3VtZW50cy8wQVx1NUYwMFx1OEJGRVx1NTQyN1x1NUI2Nlx1NEU2MC92dWUvdnVlLWNsaTQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKdmFyIFZ1ZTsKCnZhciBTdG9yZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgLy8gZnVuY3Rpb24gcGFydGlhbChmbiwgYXJnKSB7CiAgLy8gCXJldHVybiBmdW5jdGlvbigpIHsKICAvLyAJCXJldHVybiBmbihhcmcpOwogIC8vIAl9OwogIC8vIH0KICBmdW5jdGlvbiBTdG9yZShvcHRpb25zKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU3RvcmUpOwoKICAgIGNvbnNvbGUubG9nKHRoaXMsICItLXRoaXMtb3B0aW9ucy0tLS0iLCBvcHRpb25zLmdldHRlcnMpOwogICAgdGhpcy5fbXV0YXRpb25zID0gb3B0aW9ucy5tdXRhdGlvbnM7CiAgICB0aGlzLl9hY3Rpb25zID0gb3B0aW9ucy5hY3Rpb25zOwogICAgdGhpcy5fZ2V0dGVycyA9IG9wdGlvbnMuZ2V0dGVyczsKICAgIC8qIAogICAgY29uc3Qgb2JqZ2V0dGVycyA9IG9wdGlvbnMuZ2V0dGVyczsKICAgIHRoaXMuZ2V0dGVycyA9IG9wdGlvbnMuZ2V0dGVyczsKICAgICBjb25zdCBvYmpldHRlcnNLZXlzQXJyID0gT2JqZWN0LmtleXMob2JqZ2V0dGVycyk7CiAgICAgY29uc3QgY29tcHV0ZWQgPSB7fTsKICAgICBjb25zdCBzdG9yZVRoaXMgPSB0aGlzOwogICAgLy8ge3sgZG91YmxlQ291bnRlcigpe30gIH19CiAgICBvYmpldHRlcnNLZXlzQXJyLmZvckVhY2goKGl0ZW1LZXkpID0+IHsKICAgICAgY29uc29sZS5sb2codGhpcywgdGhpcy5nZXR0ZXJzLCAiMDAwMDAwaXRlbUtleTExMTExMSIsIGl0ZW1LZXkpOwogICAgICAvLyBjb21wdXRlZFtpdGVtS2V5XSA9IGZ1bmN0aW9uKCkgewogICAgICAvLyAgIHJldHVybiBvcHRpb25zLmdldHRlcnNbaXRlbUtleV0odGhpcy5zdGF0ZSk7CiAgICAgIC8vIH07CiAgICAgICAvLyBjb21wdXRlZFtpdGVtS2V5XSA9IGZ1bmN0aW9uKGZuKSB7IHJldHVybiBmbih0aGlzLnN0YXRlKTsgfTsKICAgICAgY29uc3QgZm4gPSBzdG9yZVRoaXMuZ2V0dGVyc1tpdGVtS2V5XTsKICAgICAgIGNvbXB1dGVkW2l0ZW1LZXldID0gZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIGZuKHN0b3JlVGhpcy5zdGF0ZSk7CiAgICAgIH07CiAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy5nZXR0ZXJzLCBpdGVtS2V5LCB7CiAgICAgICAgZ2V0KCkgewogICAgICAgICAgLy8gcmV0dXJuIG9iamdldHRlcnNbaXRlbUtleV0oc3RvcmUuc3RhdGUpOyAvLyB0aGlzLl92bS5fZGF0YS4kJHN0YXRlOyAvLyBnZXQ6ICgpID0+IHN0b3JlLl92bVtrZXldLAogICAgICAgICAgY29uc29sZS5sb2coInRoaXMtLS0tLS0tLS0tIiwgdGhpcywgdGhpcy5fdm0sIHRoaXMuX3ZtW2l0ZW1LZXldKTsKICAgICAgICAgIC8vIHJldHVybiBjb21wdXRlZFtpdGVtS2V5XTsKICAgICAgICAgIHJldHVybiB0aGlzLl92bVtpdGVtS2V5XTsKICAgICAgICB9LAogICAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIH0pOwogICAgfSk7ICovCgogICAgdmFyIGNvbXB1dGVkID0ge307CiAgICB0aGlzLmdldHRlcnMgPSB7fTsgLy8geyBkb3VibGVDb3VudGVyKCl7fSAgfQoKICAgIHZhciBzdG9yZSA9IHRoaXM7CiAgICBPYmplY3Qua2V5cyh0aGlzLl9nZXR0ZXJzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgdmFyIGZuID0gc3RvcmUuX2dldHRlcnNba2V5XTsKCiAgICAgIGNvbXB1dGVkW2tleV0gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIGZuKHN0b3JlLnN0YXRlKTsKICAgICAgfTsKCiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdG9yZS5nZXR0ZXJzLCBrZXksIHsKICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICAgIHJldHVybiBzdG9yZS5fdm1ba2V5XTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CiAgICB0aGlzLl92bSA9IG5ldyBWdWUoewogICAgICBkYXRhOiB7CiAgICAgICAgJCRzdGF0ZTogb3B0aW9ucy5zdGF0ZQogICAgICB9LAogICAgICBjb21wdXRlZDogY29tcHV0ZWQgLy8gY29tcHV0ZWQ6IHsKICAgICAgLy8gICAvLyBkb3VibGVDb3VudGVyOiB0aGlzLmdldEZuLAogICAgICAvLyAgIC8vIGRvdWJsZUNvdW50ZXI6IG9wdGlvbnMuZ2V0dGVycy5kb3VibGVDb3VudGVyKHN0b3JlLnN0YXRlKSwKICAgICAgLy8gICAvLyBkb3VibGVDb3VudGVyOiBmdW5jdGlvbigpIHsKICAgICAgLy8gICAvLyBkb3VibGVDb3VudGVyOiBmdW5jdGlvbigpIHsKICAgICAgLy8gICAvLyAgIGNvbnNvbGUubG9nKCJzdHJvZS1jb3VibGUtLS0tLS0tLS0iLCBvcHRpb25zLmdldHRlcnNbZmlyc3RLZXldKTsKICAgICAgLy8gICAvLyAgIHJldHVybiBvcHRpb25zLmdldHRlcnMuZG91YmxlQ291bnRlcihzdGF0ZSk7CiAgICAgIC8vICAgLy8gICAvLyByZXR1cm4gb3B0aW9ucy5nZXR0ZXJzW2ZpcnN0S2V5XTsKICAgICAgLy8gICAvLyB9LAogICAgICAvLyB9LAoKICAgIH0pOyAvLyBjb25zb2xlLmxvZyhjb21wdXRlZCwgIi0tLW9iamV0dGVycy0tLS0tLS0tYXJyIiwgb2JqZXR0ZXJzS2V5c0Fycik7CgogICAgY29uc29sZS5sb2coInN0b3JlMDAwMDAwMDAiLCBzdG9yZSk7CgogICAgdGhpcy5nZXRGbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgY29uc29sZS5sb2coIm9wIiwgb3B0aW9ucy5nZXR0ZXJzKTsKICAgICAgcmV0dXJuIG9wdGlvbnMuZ2V0dGVycy5kb3VibGVDb3VudGVyKHN0b3JlLnN0YXRlKTsKICAgIH07CgogICAgdmFyIGNvbW1pdCA9IHN0b3JlLmNvbW1pdCwKICAgICAgICBkaXNwYXRjaCA9IHN0b3JlLmRpc3BhdGNoOwoKICAgIHRoaXMuY29tbWl0ID0gZnVuY3Rpb24gYm91bmRDb21taXQodHlwZSwgcGF5bG9hZCkgewogICAgICBjb21taXQuY2FsbChzdG9yZSwgdHlwZSwgcGF5bG9hZCk7CiAgICB9OwoKICAgIHRoaXMuZGlzcGF0Y2ggPSBmdW5jdGlvbiBib3VuZERpc3BhdGNoKHR5cGUsIHBheWxvYWQpIHsKICAgICAgZGlzcGF0Y2guY2FsbChzdG9yZSwgdHlwZSwgcGF5bG9hZCk7CiAgICB9OwogIH0KCiAgX2NyZWF0ZUNsYXNzKFN0b3JlLCBbewogICAga2V5OiAiY29tbWl0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21taXQodHlwZSwgcGF5bG9hZCkgewogICAgICB2YXIgZW50cnkgPSB0aGlzLl9tdXRhdGlvbnNbdHlwZV07CgogICAgICBpZiAoIWVudHJ5KSB7CiAgICAgICAgY29uc29sZS5lcnJvcigi5aSn5YWE5byf77yM5rKh5pyJ6L+Z5LiqbXV0YXRpb24iKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGVudHJ5KHRoaXMuc3RhdGUsIHBheWxvYWQpOwogICAgfQogIH0sIHsKICAgIGtleTogImRpc3BhdGNoIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNwYXRjaCh0eXBlLCBwYXlsb2FkKSB7CiAgICAgIHZhciBlbnRyeSA9IHRoaXMuX2FjdGlvbnNbdHlwZV07CgogICAgICBpZiAoIWVudHJ5KSB7CiAgICAgICAgY29uc29sZS5lcnJvcigi5aSn5YWE5byf77yM5rKh5pyJ6L+Z5LiqYWN0aW9uIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBlbnRyeSh0aGlzLCBwYXlsb2FkKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzdGF0ZSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3ZtLl9kYXRhLiQkc3RhdGU7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQodikgewogICAgICBjb25zb2xlLmVycm9yKCLplJnor6/kuoYtLS0iKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBTdG9yZTsKfSgpOwoKZnVuY3Rpb24gaW5zdGFsbChfVnVlKSB7CiAgVnVlID0gX1Z1ZTsKICBWdWUubWl4aW4oewogICAgYmVmb3JlQ3JlYXRlOiBmdW5jdGlvbiBiZWZvcmVDcmVhdGUoKSB7CiAgICAgIGlmICh0aGlzLiRvcHRpb25zLnN0b3JlKSB7CiAgICAgICAgVnVlLnByb3RvdHlwZS4kc3RvcmUgPSB0aGlzLiRvcHRpb25zLnN0b3JlOwogICAgICB9CiAgICB9CiAgfSk7Cn0KCmV4cG9ydCBkZWZhdWx0IHsKICBTdG9yZTogU3RvcmUsCiAgaW5zdGFsbDogaW5zdGFsbAp9Ow=="},{"version":3,"sources":["/Users/davis/Documents/0A开课吧学习/vue/vue-cli4/src/kstore/kvuex.js"],"names":["Vue","Store","options","console","log","getters","_mutations","mutations","_actions","actions","_getters","computed","store","Object","keys","forEach","key","fn","state","defineProperty","get","_vm","data","$$state","getFn","doubleCounter","commit","dispatch","boundCommit","type","payload","call","boundDispatch","entry","error","_data","v","install","_Vue","mixin","beforeCreate","$options","prototype","$store"],"mappings":"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","sourcesContent":["let Vue;\n\nclass Store {\n  // function partial(fn, arg) {\n  // \treturn function() {\n  // \t\treturn fn(arg);\n  // \t};\n  // }\n\n  constructor(options) {\n    console.log(this, \"--this-options----\", options.getters);\n\n    this._mutations = options.mutations;\n    this._actions = options.actions;\n    this._getters = options.getters;\n    /* \n    const objgetters = options.getters;\n    this.getters = options.getters;\n\n    const objettersKeysArr = Object.keys(objgetters);\n\n    const computed = {};\n\n    const storeThis = this;\n    // {{ doubleCounter(){}  }}\n    objettersKeysArr.forEach((itemKey) => {\n      console.log(this, this.getters, \"000000itemKey111111\", itemKey);\n      // computed[itemKey] = function() {\n      //   return options.getters[itemKey](this.state);\n      // };\n\n      // computed[itemKey] = function(fn) { return fn(this.state); };\n      const fn = storeThis.getters[itemKey];\n\n      computed[itemKey] = function() {\n        return fn(storeThis.state);\n      };\n\n      Object.defineProperty(this.getters, itemKey, {\n        get() {\n          // return objgetters[itemKey](store.state); // this._vm._data.$$state; // get: () => store._vm[key],\n          console.log(\"this----------\", this, this._vm, this._vm[itemKey]);\n          // return computed[itemKey];\n          return this._vm[itemKey];\n        },\n        enumerable: true,\n      });\n\t\t}); */\n\n    const computed = {};\n    this.getters = {};\n    // { doubleCounter(){}  }\n\n    const store = this;\n\n    Object.keys(this._getters).forEach((key) => {\n      const fn = store._getters[key];\n      computed[key] = function() {\n        return fn(store.state);\n      };\n\n      Object.defineProperty(store.getters, key, {\n        get: () => store._vm[key],\n      });\n    });\n\n    this._vm = new Vue({\n      data: {\n        $$state: options.state,\n      },\n      computed,\n      // computed: {\n\n      //   // doubleCounter: this.getFn,\n      //   // doubleCounter: options.getters.doubleCounter(store.state),\n      //   // doubleCounter: function() {\n      //   // doubleCounter: function() {\n      //   //   console.log(\"stroe-couble---------\", options.getters[firstKey]);\n      //   //   return options.getters.doubleCounter(state);\n      //   //   // return options.getters[firstKey];\n      //   // },\n      // },\n    });\n\n    // console.log(computed, \"---objetters--------arr\", objettersKeysArr);\n\n    console.log(\"store00000000\", store);\n\n    this.getFn = function() {\n      console.log(\"op\", options.getters);\n      return options.getters.doubleCounter(store.state);\n    };\n\n    const { commit, dispatch } = store;\n    this.commit = function boundCommit(type, payload) {\n      commit.call(store, type, payload);\n    };\n    this.dispatch = function boundDispatch(type, payload) {\n      dispatch.call(store, type, payload);\n    };\n  }\n\n  get state() {\n    return this._vm._data.$$state;\n  }\n\n  set state(v) {\n    console.error(\"错误了---\");\n  }\n\n  commit(type, payload) {\n    const entry = this._mutations[type];\n\n    if (!entry) {\n      console.error(\"大兄弟，没有这个mutation\");\n      return;\n    }\n\n    entry(this.state, payload);\n  }\n\n  dispatch(type, payload) {\n    const entry = this._actions[type];\n\n    if (!entry) {\n      console.error(\"大兄弟，没有这个action\");\n      return;\n    }\n\n    entry(this, payload);\n  }\n}\n\nfunction install(_Vue) {\n  Vue = _Vue;\n\n  Vue.mixin({\n    beforeCreate() {\n      if (this.$options.store) {\n        Vue.prototype.$store = this.$options.store;\n      }\n    },\n  });\n}\n\nexport default { Store, install };\n"]}]}